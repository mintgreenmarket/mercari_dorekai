# 🚀 在庫連動システム クイックスタートガイド

## 📝 実行手順（初回）

### ステップ1: .envファイルを作成
`.env.example` をコピーして `.env` にリネームし、BASE APIの認証情報を入力します。

```bash
BASE_CLIENT_ID=あなたのクライアントID
BASE_CLIENT_SECRET=あなたのクライアントシークレット
BASE_REFRESH_TOKEN=あなたのリフレッシュトークン
BASE_ACCESS_TOKEN=あなたのアクセストークン
BASE_SHOP_ID=dorekai
```

### ステップ2: BASE商品を取得
```
base_products_fetcher.bat をダブルクリック
```

**実行結果:**
- `products_base.csv` が生成されます
- 取得できた商品数が表示されます（例: 644件）
- 統計情報も確認できます

### ステップ3: 在庫連動を開始

#### 🔹 方法A: 定期自動同期（おすすめ）
```
stock_sync_scheduler.bat をダブルクリック
```
→ 30分ごとに自動で在庫を同期し続けます

#### 🔹 方法B: 手動同期
```
stock_sync.bat をダブルクリック
```
→ 必要なときだけ実行

---

## 📊 動作確認

### ログを確認
[stock_sync_log.txt](stock_sync_log.txt) を開いて、同期状況を確認してください。

```
[2026-02-17 12:00:00] 🔄 全商品在庫同期を開始
[2026-02-17 12:00:01] ✅ メルカリ商品読込: 644件
[2026-02-17 12:00:02] ✅ BASE商品読込(CSV): 644件
[2026-02-17 12:00:02] 📊 共通品番: 620件
[2026-02-17 12:00:03] ✅ 在庫同期完了: 3件を同期
```

---

## 🔄 定期実行（日常運用）

### 1. BASE商品の更新（週1回推奨）
```
base_products_fetcher.bat を実行
```
→ 新しい商品を追加したり、商品情報が変わった場合に実行

### 2. 在庫連動の継続
```
stock_sync_scheduler.bat を常時起動
```
→ バックグラウンドで動き続けます

---

## ⚠️ トラブル時

### Q: BASE商品が取得できない
**A:** .envファイルのトークンを確認してください。期限切れの場合は再取得が必要です。

### Q: 在庫が同期されない
**A:** 以下を確認：
1. `products_base.csv` が存在するか
2. `products_mercari.csv` の品番列が正しいか
3. 商品名の最初に数字（品番）があるか
4. ログファイルにエラーがないか

### Q: 644件しか取得できない
**A:** BASE APIの制限です。現状では取得できた644件のみ在庫連動されます。

---

## 📞 詳細マニュアル
詳しい説明は [STOCK_SYNC_README.md](STOCK_SYNC_README.md) をご覧ください。
